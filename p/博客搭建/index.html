<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="写写我的博客搭建过程"><title>博客搭建</title>
<link rel=canonical href=https://weightless-sea.github.io/p/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/><link rel=stylesheet href=/scss/style.min.abbd69b2908fdfcd5179898beaafd374514a86538d81639ddd2c58c06ae54e40.css><meta property="og:title" content="博客搭建"><meta property="og:description" content="写写我的博客搭建过程"><meta property="og:url" content="https://weightless-sea.github.io/p/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"><meta property="og:site_name" content="里表世界"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Hugo"><meta property="article:published_time" content="2023-12-01T22:32:25+08:00"><meta property="article:modified_time" content="2023-12-02T01:15:29+08:00"><meta name=twitter:title content="博客搭建"><meta name=twitter:description content="写写我的博客搭建过程"><link rel="shortcut icon" href=/img/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu814810bee525dff86a92b6647ae51f44_13319_300x0_resize_box_3.png width=300 height=424 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🐋</span></figure><div class=site-meta><h1 class=site-name><a href=/>里表世界</a></h1><h2 class=site-description>属于栖暮的清醒梦🍥</h2></div></header><ol class=social-menu><li><a href=https://weibo.com target=_blank title=weibo rel=me><!doctype html><svg t="1701357614818" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="22889" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M457.3 543c-68.1-17.7-145 16.2-174.6 76.2-30.1 61.2-1 129.1 67.8 151.3 71.2 23 155.2-12.2 184.4-78.3 28.7-64.6-7.2-131-77.6-149.2zm-52 156.2c-13.8 22.1-43.5 31.7-65.8 21.6-22-10-28.5-35.7-14.6-57.2 13.7-21.4 42.3-31 64.4-21.7 22.4 9.5 29.6 35 16 57.3zm45.5-58.5c-5 8.6-16.1 12.7-24.7 9.1-8.5-3.5-11.2-13.1-6.4-21.5 5-8.4 15.6-12.4 24.1-9.1 8.7 3.2 11.8 12.9 7 21.5zM785.3 443.5c15 4.8 31-3.4 35.9-18.3 11.8-36.6 4.4-78.4-23.2-109-27.6-30.6-68.4-42.3-106-34.3-15.4 3.3-25.2 18.4-21.9 33.8 3.3 15.3 18.4 25.2 33.8 21.8 18.4-3.9 38.3 1.8 51.9 16.7 13.5 15 17.2 35.4 11.3 53.3-4.9 15.1 3.2 31.1 18.2 36z" p-id="22890"/><path d="M885.1 237.5c-56.7-62.9-140.4-86.9-217.7-70.5-17.9 3.8-29.3 21.4-25.4 39.3 3.8 17.9 21.4 29.3 39.3 25.5 55-11.7 114.4 5.4 154.8 50.1 40.3 44.7 51.2 105.7 34 159.1-5.6 17.4 3.9 36 21.3 41.7 17.4 5.6 36-3.9 41.6-21.2v-.1c24.1-75.4 8.9-161.1-47.9-223.9zM729 499c-12.2-3.6-20.5-6.1-14.1-22.1 13.8-34.7 15.2-64.7.3-86-28-40.1-104.8-37.9-192.8-1.1.0.0-27.6 12.1-20.6-9.8 13.5-43.5 11.5-79.9-9.6-101-47.7-47.8-174.6 1.8-283.5 110.6C127.3 471.1 80 557.5 80 632.2 80 775.1 263.2 862 442.5 862c235 0 391.3-136.5 391.3-245 0-65.5-55.2-102.6-104.8-118zM443 810.8c-143 14.1-266.5-50.5-275.8-144.5-9.3-93.9 99.2-181.5 242.2-195.6 143-14.2 266.5 50.5 275.8 144.4C694.4 709 586 796.6 443 810.8z" p-id="22891"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><!doctype html><svg t="1701357522354" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="22610" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M946.5 505 560.1 118.8l-25.9-25.9c-12.3-12.2-32.1-12.2-44.4.0L77.5 505c-12.3 12.3-18.9 28.6-18.8 46 .4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1.0 33.2-6.7 45.3-18.8 12.1-12.1 18.7-28.2 18.7-45.3.0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1.0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z" p-id="22611"/></svg><span>主页</span></a></li><li><a href=/friends/><!doctype html><svg t="1701357508369" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="22470" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M824.2 699.9c-25.4-25.4-54.7-45.7-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-2e2-109.1 1.7-197 90.6-197 2e2.0 62.8 29 118.8 74.2 155.5-31.7 14.7-60.9 34.9-86.4 60.4C345 754.6 314 826.8 312 903.8c-.1 4.5 3.5 8.2 8 8.2h56c4.3.0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5C493.8 707.7 551.1 684 612 684s118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56c4.5.0 8.1-3.7 8-8.2-2-77-33-149.2-87.8-203.9zM612 612c-34.2.0-66.4-13.3-90.5-37.5-24.5-24.5-37.9-57.1-37.5-91.8.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4.0 34.2-13.3 66.3-37.5 90.5S646.2 612 612 612z" p-id="22471"/><path d="M361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4.0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1-25.8-25.2-39.7-59.3-38.7-95.4.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9.0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204-.1 4.5 3.5 8.2 8 8.2h56.1c4.3.0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z" p-id="22472"/></svg><span>朋友</span></a></li><li><a href=/archives/><!doctype html><svg t="1701358356877" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="6686" id="mx_n_1701358356878" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M426.666667 597.333333h170.666666a42.666667 42.666667.0 000-85.333333H426.666667a42.666667 42.666667.0 000 85.333333zm384-469.333333H213.333333a128 128 0 00-128 128v128A42.666667 42.666667.0 00128 426.666667h42.666667V768a128 128 0 00128 128h426.666666a128 128 0 00128-128V426.666667H896A42.666667 42.666667.0 00938.666667 384V256a128 128 0 00-128-128zM768 768a42.666667 42.666667.0 01-42.666667 42.666667H298.666667A42.666667 42.666667.0 01256 768V426.666667h512zm85.333333-426.666667H170.666667V256a42.666667 42.666667.0 0142.666666-42.666667h597.333334A42.666667 42.666667.0 01853.333333 256z" p-id="6687" fill="#515151"/></svg><span>归档</span></a></li><li><a href=/search/><!doctype html><svg t="1701357236432" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="8991" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M909.6 854.5 649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1S492.1 112 412 112s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6c3.2 3.2 8.4 3.2 11.6.0l43.6-43.5c3.2-3.2 3.2-8.4.0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z" fill="#333" p-id="8992"/></svg><span>搜索</span></a></li><li><a href=/%E5%85%B3%E4%BA%8E/><!doctype html><svg t="1701354105716" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="8465" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M928 160H96c-17.7.0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7.0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136V232h752v560z" p-id="8466"/><path d="M610.3 476h123.4c1.3.0 2.3-3.6 2.3-8v-48c0-4.4-1-8-2.3-8H610.3c-1.3.0-2.3 3.6-2.3 8v48c0 4.4 1 8 2.3 8zM615.1 620h185.7c3.9.0 7.1-3.6 7.1-8v-48c0-4.4-3.2-8-7.1-8H615.1c-3.9.0-7.1 3.6-7.1 8v48c0 4.4 3.2 8 7.1 8zM224 673h43.9c4.2.0 7.6-3.3 7.9-7.5 3.8-50.5 46-90.5 97.2-90.5s93.4 40 97.2 90.5c.3 4.2 3.7 7.5 7.9 7.5H522c4.6.0 8.2-3.8 8-8.4-2.8-53.3-32-99.7-74.6-126.1 18.1-19.9 29.1-46.4 29.1-75.5.0-61.9-49.9-112-111.4-112s-111.4 50.1-111.4 112c0 29.1 11 55.5 29.1 75.5-42.7 26.5-71.8 72.8-74.6 126.1-.4 4.6 3.2 8.4 7.8 8.4zm149-262c28.5.0 51.7 23.3 51.7 52s-23.2 52-51.7 52-51.7-23.3-51.7-52 23.2-52 51.7-52z" p-id="8467"/></svg><span>关于</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>暗色模式</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#搭建准备>搭建准备</a></li><li><a href=#搭建方案>搭建方案</a></li><li><a href=#使用scoop安装hugo-extended>使用scoop安装Hugo-extended</a><ol><li><a href=#scoop的安装>scoop的安装</a></li><li><a href=#安装hugo的extend版本>安装Hugo的extend版本</a></li></ol></li><li><a href=#创建博客站点>创建博客站点</a></li><li><a href=#为博客添加stack主题>为博客添加stack主题</a><ol><li><a href=#使用-git-submodule-add将主题作为一个子模块添加到仓库中>使用 <code>git submodule add</code>将主题作为一个子模块添加到仓库中</a></li><li><a href=#初始化和更新子模块>初始化和更新子模块</a></li><li><a href=#修改主题配置>修改主题配置</a></li><li><a href=#提交更改到git-仓库>提交更改到Git 仓库：</a></li></ol></li><li><a href=#将博客部署到github上>将博客部署到github上</a><ol><li><a href=#推送到远程仓库>推送到远程仓库</a></li><li><a href=#配置-github-actions>配置 GitHub Actions</a><ol><li><a href=#创建github-actions工作流文件>创建GitHub Actions工作流文件</a></li><li><a href=#生成新的ssh-密钥>生成新的SSH 密钥</a></li><li><a href=#在-github-中设置密钥>在 GitHub 中设置密钥</a></li></ol></li><li><a href=#开启github-page>开启Github Page</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E4%B8%96%E7%95%8C/>世界</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/>博客搭建</a></h2><h3 class=article-subtitle>写写我的博客搭建过程</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>12月01日, 2023年</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>阅读时长: 5 分钟</time></div></footer></div></header><section class=article-content><p>在经历了各种磕磕碰碰后，这个博客总算是搭建完成了<br>接下来就写写此站从新建文件夹到诞生的主要过程吧</p><h2 id=搭建准备>搭建准备</h2><p>安装 <code>git</code> <code>ssh</code></p><h2 id=搭建方案>搭建方案</h2><ol><li>使用scoop安装Hugo-extended</li><li>Hugo创建博客源文件</li><li>为博客安装stack主题</li><li>在 GitHub 上创建两个新仓库，一个存放博客源文件，另一个命名为 <code>username.github.io</code>，用于存放 Hugo 生成的静态站点。</li><li>博客源文件中配置GitHub Actions以自动构建 Hugo 网站并将静态文件推送到你的 <code>username.github.io</code> 仓库，github pages自动部署博客。</li></ol><h2 id=使用scoop安装hugo-extended>使用scoop安装Hugo-extended</h2><h3 id=scoop的安装>scoop的安装</h3><p>Powershell或命令行中输入：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Set-ExecutionPolicy RemoteSigned -Scope CurrentUser # Optional: Needed to run a remote script the first time
</span></span><span class=line><span class=cl>irm get.scoop.sh | iex
</span></span></code></pre></td></tr></table></div></div><p>完成scoop的安装</p><h3 id=安装hugo的extend版本>安装Hugo的extend版本</h3><p>命令行输入：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>scoop install hugo-extended
</span></span></code></pre></td></tr></table></div></div><p>完成Hugo-extended的安装</p><h2 id=创建博客站点>创建博客站点</h2><p>命令行界面输入:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>hugo new site myblog
</span></span></code></pre></td></tr></table></div></div><p>这样就创建一个新的 Hugo 博客，相关的文件都在<code>myblog</code>文件夹中 。<br>输入<code>hugo server</code>实现hugo博客的预览，运行成功后，可以在 <code>http://localhost:1313/</code> 中预览网站（目前博客还什么都没有，打开就是一片空白）<br>命令行中输入<code>hugo</code>生成网页</p><h2 id=为博客添加stack主题>为博客添加stack主题</h2><h3 id=使用-git-submodule-add将主题作为一个子模块添加到仓库中>使用 <code>git submodule add</code>将主题作为一个子模块添加到仓库中</h3><ol><li>进入 Hugo 博客根目录</li><li>初始化 Git 仓库： <code>git init</code></li><li>添加 Stack 主题作为子模块</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git submodule add https://github.com/CaiJimmy/hugo-theme-stack/ themes/hugo-theme-stack
</span></span></code></pre></td></tr></table></div></div><h3 id=初始化和更新子模块>初始化和更新子模块</h3><p>当你首次克隆一个包含子模块的仓库时，需要初始化和更新子模块。这可以通过以下命令完成：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git submodule init
</span></span><span class=line><span class=cl>git submodule update
</span></span></code></pre></td></tr></table></div></div><p>这两个命令会初始化本地配置文件，并从那个 URL 拉取所有数据并检出你在主项目中所指定的特定提交。</p><h3 id=修改主题配置>修改主题配置</h3><ol><li>删除博客根目录下的<code>hugo.toml</code>初始配置文件</li><li>将<code>\themes\hugo-theme-stack\exampleSite</code>中的<code>config.yaml</code>配置文件和<code>content</code>文件夹复制到博客根目录</li><li>根据需要修改<code>config.yaml</code>配置文件</li></ol><h3 id=提交更改到git-仓库>提交更改到Git 仓库：</h3><ol><li>添加更改到暂存区：
<code>git add .</code></li><li>提交更改：
<code>git commit -m "Add hugo-theme-stack as a submodule"</code></li></ol><h2 id=将博客部署到github上>将博客部署到github上</h2><h3 id=推送到远程仓库>推送到远程仓库</h3><p>在 GitHub 上创建用于一个你的 Hugo 博客源文件的仓库，将本地更改推送到远程仓库：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git remote add origin &lt;your-remote-repository-url&gt;
</span></span><span class=line><span class=cl>git push -u origin master
</span></span></code></pre></td></tr></table></div></div><p>在 GitHub 上创建另一个新仓库，命名为 <code>username.github.io</code>，用于存放 Hugo 生成的静态站点。（将 <code>username</code> 替换为你的 GitHub 用户名）。稍后我们将在Hugo 源代码仓库中配置GitHub Actions ，以自动构建 Hugo 网站并将静态文件推送到这里。</p><h3 id=配置-github-actions>配置 GitHub Actions</h3><p>在 Hugo 源代码仓库中配置 GitHub Actions，以自动构建 Hugo 网站并将静态文件推送到你的 <code>username.github.io</code> 仓库。</p><h4 id=创建github-actions工作流文件>创建GitHub Actions工作流文件</h4><ol><li>在源代码仓库中创建 <code>.github/workflows</code> 目录。</li><li>在该目录中创建一个 YAML 文件，比如命名为 <code>deploy.yml</code>。</li><li>在这个文件中，添加以下内容：</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>name: Deploy Hugo
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>on:
</span></span><span class=line><span class=cl>  push:
</span></span><span class=line><span class=cl>    branches:
</span></span><span class=line><span class=cl>      - master  # 确保分支与你使用的相匹配
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>jobs:
</span></span><span class=line><span class=cl>  build-deploy:
</span></span><span class=line><span class=cl>    runs-on: ubuntu-latest
</span></span><span class=line><span class=cl>    steps:
</span></span><span class=line><span class=cl>      - name: Checkout
</span></span><span class=line><span class=cl>        uses: actions/checkout@v2
</span></span><span class=line><span class=cl>        with: 
</span></span><span class=line><span class=cl>	      submodules: &#39;recursive&#39; # 指示同步子模块
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      - name: Setup Hugo
</span></span><span class=line><span class=cl>        uses: peaceiris/actions-hugo@v2
</span></span><span class=line><span class=cl>        with:
</span></span><span class=line><span class=cl>          hugo-version: &#39;latest&#39;
</span></span><span class=line><span class=cl>          extended: true
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      - name: Build
</span></span><span class=line><span class=cl>        run: hugo --minify
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      - name: Deploy to GitHub Pages
</span></span><span class=line><span class=cl>        uses: peaceiris/actions-gh-pages@v3
</span></span><span class=line><span class=cl>        with:
</span></span><span class=line><span class=cl>          deploy_key: ${{ secrets.DEPLOY_KEY }}
</span></span><span class=line><span class=cl>          publish_dir: ./public
</span></span><span class=line><span class=cl>          external_repository: username/username.github.io  # 替换为你的静态文件仓库
</span></span><span class=line><span class=cl>          keep_files: false # 每次部署时，GitHub Pages 仓库中旧的文件都会被清除，并替换为新生成的文件。这通常是部署静态网站时的期望行为。
</span></span></code></pre></td></tr></table></div></div><p>在 <code>Deploy to GitHub Pages</code> 步骤中，选择了使用 <code>deploy_key</code>。接下来将在你的 GitHub 仓库中配置相应的部署密钥（<code>DEPLOY_KEY</code>）。这个密钥需要被添加到你的 源代码仓库的 Secrets 中，并且对应的公钥需要被添加到你的 <code>user.github.io</code> 静态文件仓库中。</p><h4 id=生成新的ssh-密钥>生成新的SSH 密钥</h4><p>使用 <code>ssh-keygen</code> 命令生成新的密钥对。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ssh-keygen -t rsa -b 4096 -C &#34;your_email@example.com&#34;
</span></span></code></pre></td></tr></table></div></div><p>将 <code>"your_email@example.com"</code> 替换为你的电子邮件地址。当系统提示你输入文件名时，输入一个独特的名称，比如 <code>hugo_deploy_key</code>，以避免覆盖任何现有的密钥。根据提示选择保存密钥的位置和是否设置密码。由于这个密钥将由自动化系统使用，所以通常不设置密码。</p><h4 id=在-github-中设置密钥>在 GitHub 中设置密钥</h4><h5 id=设置部署密钥deploy-key>设置部署密钥（Deploy Key）</h5><ol><li><strong>找到你刚生成的公钥文件</strong>：默认情况下，它将保存在 <code>~/.ssh/</code> 目录下，文件名类似于 <code>hugo_deploy_key.pub</code>。</li><li><strong>打开公钥文件并复制内容</strong>。</li><li><strong>在你的 GitHub Pages 仓库（<code>username.github.io</code>）中添加公钥作为部署密钥</strong>：<ul><li>转到 GitHub 仓库，点击 &ldquo;Settings&rdquo;。</li><li>在侧边栏中选择 &ldquo;Deploy keys&rdquo;。</li><li>点击 &ldquo;Add deploy key&rdquo;，粘贴你的公钥内容。</li><li>给它一个识别的标题，比如 &ldquo;Hugo Deploy Key&rdquo;。</li><li>确保选中 &ldquo;Allow write access&rdquo;。</li><li>点击 &ldquo;Add key&rdquo;。</li></ul></li></ol><h5 id=设置-secret><strong>设置 Secret</strong></h5><ol><li><strong>找到你的私钥文件</strong>：这是在生成密钥对时没有 <code>.pub</code> 扩展名的文件，比如 <code>hugo_deploy_key</code>。</li><li><strong>打开私钥文件并复制内容</strong>。</li><li><strong>在你的 Hugo 源代码仓库中添加私钥作为 Secret</strong>：<ul><li>转到 GitHub 仓库，点击 &ldquo;Settings&rdquo;。</li><li>在侧边栏中选择 &ldquo;Secrets and variables&rdquo;，点击"Actions"。</li><li>点击 &ldquo;New repository secret&rdquo;。</li><li>命名为 <code>DEPLOY_KEY</code>，粘贴你的私钥内容。</li><li>点击 &ldquo;Add secret&rdquo;。</li></ul></li></ol><h3 id=开启github-page>开启Github Page</h3><p><code>Github Action</code>配置完成后,我们需要开启<code>GitHub page</code>,进入你的GitHub Pages 仓库（<code>username.github.io</code>）,点击 &ldquo;Settings&rdquo;,找到<code>pages</code>项,完成相关设置。<br>将 Hugo 博客根目录推送到源代码仓库，就可以在<code>https://username.github.io</code>中访问你的博客啦。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git add .
</span></span><span class=line><span class=cl>git commit -m &#34;博客搭建完成&#34;
</span></span><span class=line><span class=cl>git push -u origin master
</span></span></code></pre></td></tr></table></div></div><p>到这里我们就成功完成了整个Hugo博客的搭建，并实现了通过GitHub Actions自动构建发布博客。</p></section><footer class=article-footer><section class=article-tags><a href=/tags/hugo/>Hugo</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>最后更新于 12月02日01点15分, 2023年</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/mklink/><div class=article-details><h2 class=article-title>mklink</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2023 栖暮·藏着并不等于遗忘</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.21.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>